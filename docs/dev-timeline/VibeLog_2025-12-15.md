# 📅 Vibe Log Timeline: 2025-12-15

> **Note:** `/commit` 명령으로 자동 기록되는 Raw Data 파일입니다.
> 하루가 끝나면 `/devlog` 명령어를 사용하여 최종 개발일지를 생성하세요.

**프로젝트:** Threads to Notion Sync (Chrome Extension)
**생성 시간:** 2025-12-15 15:30

---

## ⏰ [15:30] 커밋 #1

### 1. 🗣️ User Request (Raw Data)
**원본 프롬프트:**
> 아직도 메인화면에서 동기화 시작 버튼을 누르면 노션에 동기화가 잘 되는데, 여기서 지금 동기화를 누르면 새로운 글이 동기화가 안돼

> 왜 옵션의 버튼과 팝업의 버튼의 동작 차이가 있는거야?

> 5분에 10개로 변경하자. 팝업 버튼도 50개 말고 30개로 변경해줘

**AI가 파악한 의도:**
- popup의 "지금 동기화" 버튼과 options의 "동기화 시작" 버튼의 동작 불일치 문제 해결
- 두 버튼의 동기화 로직을 통일하여 일관된 동작 보장
- API Rate limit 방지를 위한 호출량 최적화

**요청에서 누락/모호했던 정보:**
- 초기에 두 버튼의 의도적 차이인지, 버그인지 불명확했음
- Rate limit 문제는 사용자가 직접 지적해주어 개선

### 2. 🏗️ Implementation
**변경된 파일:**
| 파일 경로 | 작업 | 내용 |
| :--- | :--- | :--- |
| src/background.js | 수정 | performSync()에 limit 파라미터 추가, ID 기반 필터링으로 변경 |
| src/storage/storage.js | 수정 | 기본 syncInterval 1분 → 5분 변경 |
| src/ui/options.js | 수정 | 기본 syncInterval 1분 → 5분 변경 |

**핵심 코드 (Core Logic):**
```javascript
// background.js - performSync() 파라미터 추가
async function performSync(options = {}) {
  const { limit = 30 } = options;
  // ...
  const response = await threadsApi.getUserThreads(settings.threadsToken, { limit });
  // lastSyncTime 필터링 제거 → ID 기반 체크로 변경
  for (const thread of recentThreads) {
    const alreadySynced = await storage.isThreadSynced(thread.id);
    if (alreadySynced) continue;
    // ...
  }
}

// 알람에서 호출 (자동 동기화: 10개)
await performSync({ limit: 10 });

// 메시지 핸들러에서 호출 (팝업 버튼: 30개)
return await performSync({ limit: 30 });
```

**적용 기술/라이브러리:**
- Chrome Extension Storage API
- Threads Graph API

### 3. 🐞 Trouble & Fix
**에러 발생 여부:** ❌ 없음

**Error Log:**
```
None (별도 에러는 API access blocked 이슈로 Meta 앱 검수 대기 중)
```

**원인 분석:**
- popup의 performSync()는 lastSyncTime 기반 필터링 사용
- options의 syncFromDate()는 ID 기반 체크 사용
- 두 로직의 불일치로 popup에서 새 글을 놓칠 수 있었음

**해결 과정:**
- 두 버튼 모두 ID 기반 체크 방식으로 통일
- 시간 기반 필터링 제거하여 안정성 확보

### 4. 💡 Prompt Reflection (Micro-Coaching)
**😅 이 부분이 아쉬웠다:**
- 초기에 문제를 잘못 분석하여 전체 게시글을 조회하는 비효율적인 코드로 수정했다가 롤백

**✅ 이렇게 요청했으면 완벽했다 (Best Practice):**
> "popup과 options의 동기화 버튼이 다르게 동작해. popup은 lastSyncTime 기반이고 options는 ID 기반인데, 둘 다 ID 기반으로 통일해줘. 그리고 API 호출량을 줄이기 위해 자동 동기화는 5분/10개, 수동은 30개로 해줘."

**🎓 배운 점:**
- 동일한 목적의 기능은 동일한 로직으로 통일해야 유지보수가 용이함
- API Rate limit을 고려한 설계가 중요함
- 문제 해결 시 전체 흐름을 파악한 후 수정해야 함
