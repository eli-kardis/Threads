# ğŸ“… Vibe Log Timeline: 2025-12-13

> **Note:** `/commit` ëª…ë ¹ìœ¼ë¡œ ìë™ ê¸°ë¡ë˜ëŠ” Raw Data íŒŒì¼ì…ë‹ˆë‹¤.
> í•˜ë£¨ê°€ ëë‚˜ë©´ `/devlog` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœì¢… ê°œë°œì¼ì§€ë¥¼ ìƒì„±í•˜ì„¸ìš”.

**í”„ë¡œì íŠ¸:** Threads to Notion Sync (Chrome Extension)
**ìƒì„± ì‹œê°„:** 2025-12-13 ì˜¤í›„

---

## â° [ì˜¤í›„] ì»¤ë°‹ #1

### 1. ğŸ—£ï¸ User Request (Raw Data)
**ì›ë³¸ í”„ë¡¬í”„íŠ¸:**
> cd/Threads
> /review-all
> (ì „ì²´ í”„ë¡œì íŠ¸, ëª¨ë“  íŒŒì¼, ì œì™¸ ì—†ìŒ ì„ íƒ)
> ì˜ì–´ ë§ê³  í•œê¸€ë¡œ í•´
> ìˆ˜ì •í–ˆì„ ë•Œ ê¸°ì¡´ ì•± ì‘ë™ì— ë¬¸ì œê°€ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤ê³  íŒë‹¨í•œë‹¤ë©´ ìˆ˜ì • ì§„í–‰í•˜ì„¸ìš”
> ë” ìˆ˜ì •í•´ì•¼í•  ê±´ ì—†ëŠ”ê±°ì•¼? ì•„ë‹ˆë©´ ì¦‰ì‹œ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ê²ƒë§Œ í•œê±°ì•¼?
> (ì•ˆì „í•œ ë²„ê·¸ ìˆ˜ì •ë§Œ ì„ íƒ)
> í™•ì¸í•˜ê³  ìˆ˜ì •í•´ì•¼í•˜ëŠ” ê²ƒë“¤ë§Œ ëª¨ì•„ì„œ íŒŒì¼ë¡œ ì €ì¥í•´ë´

**AIê°€ íŒŒì•…í•œ ì˜ë„:**
- ì „ì²´ ì½”ë“œë² ì´ìŠ¤ í’ˆì§ˆ ë¶„ì„ ë° ë²„ê·¸ íƒì§€ ìš”ì²­
- ê¸°ì¡´ ì•± ë™ì‘ì— ì˜í–¥ ì—†ëŠ” ì•ˆì „í•œ ë²„ê·¸ ìˆ˜ì • ì§„í–‰
- ë‚¨ì€ ìˆ˜ì • í•„ìš” ì´ìŠˆë“¤ì„ ë¬¸ì„œë¡œ ì •ë¦¬

**ìš”ì²­ì—ì„œ ëˆ„ë½/ëª¨í˜¸í–ˆë˜ ì •ë³´:**
- ì´ˆê¸°ì—ëŠ” ì „ì²´ ìˆ˜ì • vs ì•ˆì „ ìˆ˜ì • ì„ íƒì§€ ì œê³µ í›„ ì‚¬ìš©ìê°€ "ì•ˆì „í•œ ë²„ê·¸ ìˆ˜ì •ë§Œ" ì„ íƒ

### 2. ğŸ—ï¸ Implementation
**ë³€ê²½ëœ íŒŒì¼:**
| íŒŒì¼ ê²½ë¡œ | ì‘ì—… | ë‚´ìš© |
| :--- | :--- | :--- |
| manifest.json | ì¶”ê°€ | CSP ì •ì±… ì¶”ê°€ (XSS ë°©ì§€) |
| src/shared/utils.js | ìˆ˜ì • | substr â†’ slice ë§ˆì´ê·¸ë ˆì´ì…˜ |
| src/content.js | ìˆ˜ì • | ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€, MutationObserver ì •ë¦¬, substrâ†’slice |
| src/storage/storage.js | ìˆ˜ì • | ë°°ì—´ ê¸¸ì´ ë²„ê·¸ ìˆ˜ì •, í† í° ê²€ì¦, ìƒìˆ˜í™” |
| src/api/threads.js | ìˆ˜ì • | í˜ì´ì§€ë„¤ì´ì…˜ ë¬´í•œë£¨í”„ ë°©ì§€ |
| src/api/notion.js | ìˆ˜ì • | í˜ì´ì§€ë„¤ì´ì…˜ ì•ˆì „ì¥ì¹˜ |
| src/background.js | ìˆ˜ì • | username ê²€ì¦ ê°•í™”, í† í° ê°±ì‹  ì¬ì‹œë„ ë¡œì§ |
| src/ui/options.js | ìˆ˜ì • | OAuth ì·¨ì†Œ ì²˜ë¦¬ ê°œì„  |
| src/ui/dashboard.js | ìˆ˜ì • | Chart.js ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ |
| ISSUES_TO_FIX.md | ìƒì„± | ë‚¨ì€ ìˆ˜ì • í•„ìš” ì´ìŠˆ ë¬¸ì„œí™” |

**í•µì‹¬ ì½”ë“œ (Core Logic):**
```javascript
// 1. CSP ì •ì±… ì¶”ê°€ (manifest.json)
"content_security_policy": {
  "extension_pages": "script-src 'self'; object-src 'self'"
}

// 2. í˜ì´ì§€ë„¤ì´ì…˜ ë¬´í•œë£¨í”„ ë°©ì§€ (threads.js)
const PAGINATION_LIMITS = { MAX_PAGES: 100, MAX_ITEMS: 5000 };
const seenCursors = new Set();
if (cursor && seenCursors.has(cursor)) {
  console.warn('Pagination loop detected, breaking');
  break;
}

// 3. username ê²€ì¦ ê°•í™” (background.js)
const myUsername = myUserResult.user?.username;
if (!myUsername) {
  throw new Error('Failed to retrieve username from Threads API');
}

// 4. OAuth ì·¨ì†Œ ì²˜ë¦¬ (options.js)
if (!responseUrl) {
  throw new Error('ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤');
}

// 5. í† í° ê°±ì‹  ì¬ì‹œë„ ë¡œì§ (background.js)
const TOKEN_REFRESH_CONFIG = { MAX_RETRIES: 3, RETRY_DELAY_MS: 2000 };
for (let attempt = 1; attempt <= TOKEN_REFRESH_CONFIG.MAX_RETRIES; attempt++) {
  try {
    const result = await threadsApi.refreshLongLivedToken(token);
    // ì„±ê³µ
    return { success: true, reason: 'refreshed' };
  } catch (error) {
    if (attempt < TOKEN_REFRESH_CONFIG.MAX_RETRIES) {
      await new Promise(resolve => setTimeout(resolve, TOKEN_REFRESH_CONFIG.RETRY_DELAY_MS));
    }
  }
}

// 6. Chart.js ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ (dashboard.js)
function cleanupChart() {
  if (dailyChart) { dailyChart.destroy(); dailyChart = null; }
}
window.addEventListener('beforeunload', cleanupChart);

// 7. Storage ë°°ì—´ ê¸¸ì´ ë²„ê·¸ ìˆ˜ì • (storage.js)
// ê¸°ì¡´: history.splice(500) - ì˜ëª»ë¨
// ìˆ˜ì •: if (history.length > 500) { history.length = 500; }
```

**ì ìš© ê¸°ìˆ /ë¼ì´ë¸ŒëŸ¬ë¦¬:**
- Chrome Extension Manifest V3
- Content Security Policy (CSP)
- JavaScript ES6+ (Optional Chaining, Set, async/await)
- Chart.js ë©”ëª¨ë¦¬ ê´€ë¦¬
- MutationObserver ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬

### 3. ğŸ Trouble & Fix
**ì—ëŸ¬ ë°œìƒ ì—¬ë¶€:** âŒ ì—†ìŒ

**Error Log:**
```
None - ì‚¬ì „ ë¶„ì„ì„ í†µí•œ ì˜ˆë°©ì  ë²„ê·¸ ìˆ˜ì •
```

**ì›ì¸ ë¶„ì„:**
- 5ê°œ ë³‘ë ¬ ì—ì´ì „íŠ¸ë¡œ ì½”ë“œ ë¶„ì„ ìˆ˜í–‰ (ì½”ë“œ ë¦¬ë·°, ë²„ê·¸ íƒì§€, ë¬¸ì„œí™”, í…ŒìŠ¤íŠ¸ ë¶„ì„, ë¦¬íŒ©í† ë§)
- ì „ì²´ 23ê°œ ë²„ê·¸ ë°œê²¬ (Critical 5, Major 11, Minor 7)
- 12ê°œ ì•ˆì „í•œ ìˆ˜ì • ì™„ë£Œ, 11ê°œ ì´ìŠˆ ë¬¸ì„œí™”

**í•´ê²° ê³¼ì •:**
- 1ì°¨ ìˆ˜ì •: CSP, deprecated API, storage ë²„ê·¸, í˜ì´ì§€ë„¤ì´ì…˜, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜, ìƒìˆ˜í™” (8ê°œ)
- 2ì°¨ ìˆ˜ì •: username ê²€ì¦, OAuth ì·¨ì†Œ ì²˜ë¦¬, Chart ì •ë¦¬, í† í° ì¬ì‹œë„ (4ê°œ)

### 4. ğŸ’¡ Prompt Reflection (Micro-Coaching)
**ğŸ˜… ì´ ë¶€ë¶„ì´ ì•„ì‰¬ì› ë‹¤:**
- ì´ˆê¸° "ìˆ˜ì • ì§„í–‰í•˜ì„¸ìš”"ë§Œìœ¼ë¡œëŠ” ìˆ˜ì • ë²”ìœ„ê°€ ë¶ˆëª…í™•í–ˆìŒ

**âœ… ì´ë ‡ê²Œ ìš”ì²­í–ˆìœ¼ë©´ ì™„ë²½í–ˆë‹¤ (Best Practice):**
> "ì½”ë“œ ë¦¬ë·° ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê¸°ì¡´ ê¸°ëŠ¥ì— ì˜í–¥ ì—†ëŠ” ì•ˆì „í•œ ë²„ê·¸ë§Œ ìˆ˜ì •í•´ì¤˜. Critical/High ì´ìŠˆ ì¤‘ì—ì„œ ì‚¬ì´ë“œì´í™íŠ¸ê°€ ì—†ëŠ” ê²ƒë“¤ ìœ„ì£¼ë¡œ."

**ğŸ“ ë°°ìš´ ì :**
- `splice(n)`ëŠ” ì¸ë±ìŠ¤ n ì´í›„ë¥¼ ì œê±°í•˜ëŠ” ê²ƒì´ì§€ ë°°ì—´ì„ nê°œë¡œ ì œí•œí•˜ëŠ” ê²Œ ì•„ë‹˜
- deprecated API(substr)ëŠ” ì‘ë™í•˜ì§€ë§Œ ë¯¸ë˜ í˜¸í™˜ì„±ì„ ìœ„í•´ ì„ ì œì  ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”
- MutationObserverì™€ Chart.js ê°™ì€ ë¦¬ì†ŒìŠ¤ëŠ” ë°˜ë“œì‹œ ì •ë¦¬(cleanup) ë¡œì§ í•„ìš”
- í† í° ê°±ì‹  ê°™ì€ ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì€ ì¬ì‹œë„ ë¡œì§ì´ í•„ìˆ˜
